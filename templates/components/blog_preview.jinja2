{% from 'components/username_display.jinja2' import username_display with context %}

{% macro blog_preview(blog) %}
  {# overflow hidden (temporary) #}
  <div class="event" style="overflow-x: hidden;">
    <div class="label">
      <a href="{{ url('generic', blog.author.pk) }}"><img src="{{ blog.author.avatar_small.url }}"></a>
    </div>
    <div class="content">
      <div class="summary">
        {{ username_display(blog.author, tiny=True) }} posted {{ blog.title }}
        <div class="date">
          {{ blog.edit_time | naturaltime }}
        </div>
        <p></p>
      </div>
      <div class="extra text">
        {{ blog.text | markdown | get_intro }} <a href="{{ url('blog:detail', blog.pk) }}">...more</a>
      </div>
      <div class="meta">
        <i class="like icon"></i> {{ blog.likes__count }} Likes
      </div>
    </div>
  </div>
{% endmacro %}